<h1>Register</h1>
<form method="POST" action="/login/register" id="sign-up-form">
<label for="first-name">First name</label>
<input type="text" id="first-name" name="first-name" required>
<br>
<label for="last-name">Last name</label>
<input type="text" id="last-name" name="last-name">
<br>
<label for="email">E-mail</label>
<input type="email" id="email" name="email">
<br>
<label for="age">age</label>
<input type="number" id="age" name="age" required>
<br>
<label for="password">Password</label>
<input type="password" id="password" name="password" required>
<br>
<input type="submit" value="Sign up">
</form>

<script>

const formRegister = document.querySelector('#sign-up-form')

if (formRegister instanceof HTMLFormElement) {
  formRegister.addEventListener('submit', async function(event) {
    event.preventDefault()
    
    const input_first_name = document.querySelector('#first-name')
    const input_last_name = document.querySelector('#last-name')
    const input_email = document.querySelector('#email')
    const input_age = document.querySelector('#age')
    const input_password = document.querySelector('#password')

    if (
      input_first_name instanceof HTMLInputElement &&
      input_last_name instanceof HTMLInputElement &&
      input_email instanceof HTMLInputElement &&
      input_age instanceof HTMLInputElement &&
      input_password instanceof HTMLInputElement
    ) {

      const datosUsuario = {
        first_name: input_first_name.value,
        last_name: input_last_name.value,
        email: input_email.value,
        age: input_age.value,
        password: input_password.value,
      }
        console.log(datosUsuario)
      const usuarioCreado = await fetch('/api/auth/register', {
        method: 'POST',
        headers: {
          'Accept': 'application/json',
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(datosUsuario)
      }).then(window.location.href = '/api/sessions/login') //cambiar a productos
    }
  })
}
</script>

